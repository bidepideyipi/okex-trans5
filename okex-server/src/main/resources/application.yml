server:
  port: 8080

grpc:
  server:
    port: 50051

spring:
  application:
    name: okex-server
  data:
    mongodb:
      uri: mongodb://${mongodb.host:localhost}:${mongodb.port:27017}/${mongodb.database:okex_data}

# MongoDB配置
mongodb:
  host: localhost
  port: 27017
  database: okex_data

# Redis配置
redis:
  enabled: true          # 启用Redis
  host: localhost
  port: 6379
  database: 0

# WebSocket配置
websocket:
  okex:
    url: wss://ws.okx.com:8443/ws/v5/business
    reconnect_interval: 5000
    heartbeat_interval: 30000
    initialReconnectInterval: 1000
    maxReconnectAttempts: 10
    heartbeatTimeout: 60000
    proxy:
      enabled: true
      type: socks5
      host: 127.0.0.1
      port: 4781

# 订阅配置
subscription:
  symbols:
    - BTC-USDT-SWAP
    - ETH-USDT-SWAP
  intervals:
    - 1m
    - 1H
  refresh-interval-ms: 60000

# Candle批量写入配置
candle:
  batch:
    flush:
      interval:
        seconds: 20  # 每20秒批量写入一次数据库
  integrity:
    check:
      enabled: true      # 启用数据完整性检查
      strict: true       # 严格模式：true=自动从REST API补充数据，false=返回不完整数据并警告
    fetch:
      limit: 300         # 从OKEx REST API获取数据的最大数量
    cache:
      expire-seconds: 0  # Redis缓存过期时间（秒）：0=禁用缓存，>0=启用缓存并设置过期时间

# OKEx REST API配置
okex:
  rest:
    api:
      url: https://www.okx.com
      timeout: 10000     # HTTP连接超时时间（毫秒）

# 日志配置
logging:
  level:
    com.okex: DEBUG
    root: INFO